
<!DOCTYPE html>
<html lang="zh">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet/less" type="text/css" href="http://feilong.me/theme/stylesheet/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js" type="text/javascript"></script>

  <link rel="stylesheet" type="text/css" href="http://feilong.me/theme/pygments/friendly.min.css">
  <link rel="stylesheet" type="text/css" href="http://feilong.me/theme/font-awesome/css/font-awesome.min.css">


    <link href="http://feilong.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="飞龙札记 Atom">


    <link rel="shortcut icon" href="/static/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="author" content="飞龙" />
    <meta name="description" content="飞龙札记 - felinx's blog" />
<meta property="og:site_name" content="飞龙札记"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="飞龙札记"/>
<meta property="og:description" content="飞龙札记 - felinx's blog"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://feilong.me"/>
<meta property="og:image" content="/static/feilong.jpg">

  <title>飞龙札记 &ndash; Category IT</title>

</head>
<body>
  <aside>
    <div>
      <a href="http://feilong.me">
        <img src="/static/feilong.jpg" alt="飞龙札记" title="飞龙札记">
      </a>
      <h1><a href="http://feilong.me">飞龙札记</a></h1>

<p>Nice speech, but what are you going to do.</p>
      <nav>
        <ul class="list">

          <li><a href="/about.html" target="_blank">About</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="https://github.com/felinx" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-rss" href="/feeds/all.atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="http://feilong.me">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="http://feilong.me/feeds/all.atom.xml">    Atom
</a>

    </nav>



<article>
  <header>
    <h2><a href="http://feilong.me/2011/07/talk-about-polling-and-long-polling.html#2011/07/talk-about-polling-and-long-polling">浅析轮询(Polling)和推送(Long-Polling)服务</a></h2>
    <p>
          Posted on Wed 13 July 2011 in <a href="http://feilong.me/category/it.html">IT</a>


          &#8226;     Tagged with

              <a href="http://feilong.me/tag/polling.html">Polling</a>,              <a href="http://feilong.me/tag/long-polling.html">Long-Polling</a>
        &#8226; 1 min read
    </p>
  </header>
  <div>
      <p>说明：此博客源自我在python-cn邮件群组中对网友关于Comet的问题的回答，特整理下供更多需要了解的人参考。</p>
<ol class="arabic simple">
<li>轮询(Polling)是指不管服务器端有没有更新，客户端(通常是指浏览器)都定时的发送请求进行查询，轮询的结果可能是服务器端有新的更新过来，也可能什么也没有，只是返回个空的信息。不管结果如何，客户端处理完后到下一个定时时间点将继续下一轮的轮询。</li>
<li>推送或叫长连接(Long-Polling)的服务其客户端是不做轮询的，客户端在发起一次请求后立即挂起，一直到服务器端有更新的时候，服务器才会主动推送信息到客户端。&nbsp;在服务器端有更新并推送信息过来之前这个周期内，客户端不会有新的多余的请求发生，服务器端对此客户端也啥都不用干，只保留最基本的连接信息，一旦服务器有更新将推送给客户端，客户端将相应的做出处理，处理完后再重新发起下一轮请求。</li>
</ol>
<p>举个例子说明下就很清楚了：</p>
<ol class="arabic simple">
<li>轮询模式，假设是客户端每2秒轮询一次，那么客户端每2秒就会发送一次请求，相应的服务器端每2秒就要响应这个客户端的一次请求。而实际上服务器端可能1秒钟后就有更新，也可能1分钟后才有更新。对于1秒钟就有更新的，客户端至少会有1秒钟的延时；而1分钟后才有更新的，只有最后一次查询有意义，这一分钟内的轮询其实都是没有必要的，服务器端和客户端均有资源的浪费。</li>
<li>推送模式，客户端发送一次请求后马上挂起等待服务器端响应，可能1秒，也可能10秒钟，也可能1分钟。如果服务器端是1秒就有更新，那么到1秒钟时客户端马上就收到更新了，如果是1分钟才有更新，那么整个一分钟客户端也只请求一次，服务器也只会相应一次 …</li></ol>
      <br>
      <a class="btn" href="http://feilong.me/2011/07/talk-about-polling-and-long-polling.html#2011/07/talk-about-polling-and-long-polling">    Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://feilong.me/2011/06/nginx-reverse-proxy.html#2011/06/nginx-reverse-proxy">nginx反向代理配置(附：tornadoweb.cn的nginx配置)</a></h2>
    <p>
          Posted on Sat 11 June 2011 in <a href="http://feilong.me/category/it.html">IT</a>


          &#8226;     Tagged with

              <a href="http://feilong.me/tag/nginx.html">nginx</a>,              <a href="http://feilong.me/tag/fan-xiang-dai-li.html">反向代理</a>
        &#8226; 1 min read
    </p>
  </header>
  <div>
      <p>GAE的Hosting站点
<a class="reference external" href="http://appspot.com/">appspot.com</a>在国内被墙，因此架设在GAE上的运用没法直接访问，需要曲线救国，其中一招比较有效的方式即是通过nginx反向代理来实现，不过这个要求你在国外有一个可用的nginx。下面以<a class="reference external" href="http://www.tornadoweb.cn">tornadoweb.cn</a>为例讲述如何用nginx配置反向代理(注：tornadoweb.cn为<a class="reference external" href="http://www.tornadoweb.org/">tornadoweb.org</a>的镜像站点，原站就是在GAE上，因此国内无法直接访问)。关于nginx的基本配置部分请参考我在poweredsites上的博客<a class="reference external" href="http://blog.poweredsites.org/entry/how-to-setup-nginx">how-to-setup-nginx</a>，本文只讨论如何配置tornadoweb.cn这个站点，配置说明详见配置中的注释。</p>
<pre class="literal-block">
server {
　  # 监听80端口，通常可以省略。
    listen   80;

　  # 要配置的站点域名，即用来曲线访问GAE上的原站点的域名。
    server_name  www.tornadoweb.cn;

    # Ben老大要求tornadoweb.cn有说明是镜像站点以区别于原站tornadoweb.org，
    # 因此我走巧将头上的LOGO采用修改过的本地文件，在原logo上加了mirror的声明
    location /static/tornado.png {
        # LOGO文件tornado.png所在文件夹目录
        root /mnt/ebs …</pre>
      <br>
      <a class="btn" href="http://feilong.me/2011/06/nginx-reverse-proxy.html#2011/06/nginx-reverse-proxy">    Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://feilong.me/2011/03/amazon-aws-ec2-hardware-failure.html#2011/03/amazon-aws-ec2-hardware-failure">囧，Amazon AWS EC2硬件故障</a></h2>
    <p>
          Posted on Sun 06 March 2011 in <a href="http://feilong.me/category/it.html">IT</a>


          &#8226;     Tagged with

              <a href="http://feilong.me/tag/aws.html">aws</a>
        &#8226; 1 min read
    </p>
  </header>
  <div>
      <p>今天早上起来开Gmail又收到一封来自Amazon的邮件，这次不是新功能的Annoucement邮件也不是Billing邮件，而是一封Notice邮件，惊了我一声冷汗，邮件内容如下（部分内容打了马赛克）：</p>
<pre class="literal-block">
Hello,

 We have noticed that one or more of your instances are running on a host degraded due to hardware failure.

 i-221bdxxx

 The risk of your instances failing is increased at this point. We cannot  determine the health of any applications running on the …</pre>
      <br>
      <a class="btn" href="http://feilong.me/2011/03/amazon-aws-ec2-hardware-failure.html#2011/03/amazon-aws-ec2-hardware-failure">    Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://feilong.me/2011/02/monitor-core-processes-with-monit.html#2011/02/monitor-core-processes-with-monit">用monit监控系统关键进程</a></h2>
    <p>
          Posted on Thu 24 February 2011 in <a href="http://feilong.me/category/it.html">IT</a>


          &#8226;     Tagged with

              <a href="http://feilong.me/tag/monit.html">monit</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <p><a class="reference external" href="http://mmonit.com/monit/">monit</a>是一款功能强大的系统状态、进程、文件、目录和设备的监控软件，用于*nix平台，
它可以自动重启那些已经挂掉的程序，非常适合监控系统关键的进程和资源，如：nginx、apache、mysql和cpu占有率等。而监控管理Python进程，常用的是<a class="reference external" href="http://supervisord.org/">supervisor</a>，后续会另外撰文介绍。</p>
<p>下面分别介绍monit的安装、配置和启动。</p>
<div class="section" id="id1">
<h2>安装</h2>
<p>在debian或ubuntu上安装monit非常方便，通过下面的命令</p>
<pre class="literal-block">
sudo apt-get install monit
</pre>
<p>即可，其它*nix上也很简单，下载源码走一遍安装三步就OK了。</p>
<pre class="literal-block">
./configure
make
make install
</pre>
<p>安装后，默认的配置文件为/etc/monit/monitrc。</p>
</div>
<div class="section" id="id2">
<h2>配置</h2>
<p>添加需要监控的进程等信息至monit的配置文件，monit的配置详见下面的示例文件，为了便于理解，关键的配置我都给出了中文的注释。</p>
<pre class="literal-block">
##
## 飞龙札记 示例monit配置文件，说明：
## 1. 域名以example.com为例 …</pre></div>
      <br>
      <a class="btn" href="http://feilong.me/2011/02/monitor-core-processes-with-monit.html#2011/02/monitor-core-processes-with-monit">    Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://feilong.me/2011/01/vmware-pragmatic-tips.html#2011/01/vmware-pragmatic-tips">VMware几个实用技巧</a></h2>
    <p>
          Posted on Mon 17 January 2011 in <a href="http://feilong.me/category/it.html">IT</a>


          &#8226;     Tagged with

              <a href="http://feilong.me/tag/vmware.html">vmware</a>
        &#8226; 2 min read
    </p>
  </header>
  <div>
      <p>近日Buzz好友<a class="reference external" href="http://www.google.com/profiles/104231231256400902165">Kyle
Hu</a>同学刚碰到一个关于VM的问题（具体见第三条），借此机会整理一下自己使用VM的几个实用技巧与大家分享。</p>
<div class="section" id="vm">
<h2>1.VM快照管理</h2>
<p>这个功能实在太常用，不用我多废话。这里只是提醒一下还没有用过快照的同学，赶紧的给自己的VM保存点快照吧，这样VM里的系统出了问题或是有其它需要很容易让你还原到原来的某个点，这功能可比Ghost的克隆、恢复真机系统要来的方便的多。快照唯一的毛病就是VM占用的空间大小会急剧增加，是实际增加的空间的好几倍，不知道VMware是怎么搞的。</p>
<p><img alt="image0" class="size-full wp-image-181 aligncenter" src="/static/2011/01/vm-take-snapshot.jpg" style="width: 675px; height: 249px;" /></p>
</div>
<div class="section" id="id1">
<h2>2.扩大硬盘容量</h2>
<p>有时候你可能会遇到原先给定的VM的硬盘空间不够了，这个时候就需要扩大硬盘容量了，如果增加额外的一个硬盘（如下图）能满足需求那问题是比较简单的了。</p>
<p><img alt="image1" class="size-full wp-image-182 aligncenter" src="/static/2011/01/vm-add-hd.jpg" style="width: 659px; height: 474px;" /></p>
<p>但是有时候可能必须要扩大某个已有的硬盘分区（比如原来D盘只有10G，现在必须把D盘扩大到20G），这个时候就需要用到vmware-vdiskmanager.exe（位于VMware安装路径根目录，如：C:\Program
Files\VMware\VMware
Workstation，有些安装版本可能不自带这个，如果没有就去下一个对应的版本吧），vmware-vdiskmanager.exe的帮助信息非常清楚，如下：</p>
<pre class="literal-block">
VMware&nbsp;Virtual&nbsp;Disk&nbsp;Manager&nbsp;-&nbsp;build&nbsp;34685.
Usage …</pre></div>
      <br>
      <a class="btn" href="http://feilong.me/2011/01/vmware-pragmatic-tips.html#2011/01/vmware-pragmatic-tips">    Continue reading
</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://feilong.me/2011/01/amazon-aws-ec2-guide.html#2011/01/amazon-aws-ec2-guide">亚马逊AWS(EC2)资源汇总</a></h2>
    <p>
          Posted on Sat 01 January 2011 in <a href="http://feilong.me/category/it.html">IT</a>


          &#8226;     Tagged with

              <a href="http://feilong.me/tag/aws.html">aws</a>,              <a href="http://feilong.me/tag/yun-ji-suan.html">云计算</a>
        &#8226; 1 min read
    </p>
  </header>
  <div>
      <p>亚马逊AWS全称Amazon Web
Services，即亚马逊于2006年推出的云计算服务，核心产品包括EC2、S3、EBS、CloudFront、SimpleDB等，全部产品列表见：<a class="reference external" href="http://aws.amazon.com/products/">http://aws.amazon.com/products/</a>。</p>
<p>从2010年11月1日开始，亚马逊还推出了一个免费<a class="reference external" href="http://aws.amazon.com/free/">AWS Free Usage
Tier</a>体验活动，相当于613
MB的VPS，可以免费（部分超额的使用还是要收费的）使用一年。</p>
<p>在国外AWS居领导地位，很多大站、新站都用了AWS的服务，比如<a class="reference external" href="http://twitter.com">Twitter</a>、<a class="reference external" href="http://bitbucket.org">Bitbucket</a>、<a class="reference external" href="http://www.quora.com">Quora</a>，而在国内可能知道的、用过AWS的人并不多。我也是在<a class="reference external" href="http://www.andapponline.com">James
Zhang</a>同学不停的鼓动下最终用上了AWS的，<a class="reference external" href="http://feilong.me">飞龙札记</a>和我的<a class="reference external" href="http://poweredsites.org">http://poweredsites.org</a>就是部署在AWS上，下面是我收集的一些关于AWS的资源汇总：</p>
<p>AWS官方的文档入口</p>
<ul class="simple">
<li><a class="reference external" href="http://aws.amazon.com/documentation/">http://aws …</a></li></ul>
      <br>
      <a class="btn" href="http://feilong.me/2011/01/amazon-aws-ec2-guide.html#2011/01/amazon-aws-ec2-guide">    Continue reading
</a>
  </div>
</article>

  <div class="pagination">
  </div>




    <footer>
<p>
  &copy; 飞龙 2017 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>
</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
         src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-9694421-8', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " 飞龙札记 ",
  "url" : "http://feilong.me",
  "image": "/static/feilong.jpg",
  "description": "飞龙札记 - felinx's blog"
}
</script>
  
</body>
</html>